# Block Broken - ゲーム仕様書

## 概要
Block Brokenは、クラシックなブロック崩しゲームをベースにしたモダンなアクションゲームです。マルチボール、パワーアップ、パーティクルエフェクトなどの機能を備えています。

## ゲーム基本情報
- **ジャンル**: ブロック崩し / アクション
- **プレイ人数**: 1人
- **対象年齢**: 全年齢
- **プラットフォーム**: Webブラウザ（HTML5 Canvas）

## ゲームシステム

### ゲーム状態
- `title`: タイトル画面
- `playing`: ゲームプレイ中
- `paused`: 一時停止
- `gameover`: ゲームオーバー
- `clear`: ステージクリア

### 基本ルール
1. パドルを操作してボールを反射させる
2. 画面上部のブロックを全て破壊する
3. ボールを落とさないように注意する
4. ライフが0になるとゲームオーバー

### ライフシステム
- **初期ライフ**: 3
- **最大ライフ**: 5
- **ライフ減少条件**: ボールが画面下に落下
- **ライフ増加**: パワーアップアイテム「ライフ増加」で回復

## ゲーム要素

### パドル
- **初期サイズ**: 幅80px × 高さ12px
- **移動速度**: 7px/frame
- **操作**: 左右矢印キー、マウス移動
- **特殊能力**: シールド効果でライフ保護

### ボール
- **初期サイズ**: 半径8px
- **初期速度**: 5px/frame
- **初期方向**: 右下方向（dx: 3, dy: -3）
- **最大速度**: 8px/frame
- **特殊能力**: 貫通弾、マルチボール

### ブロック
- **配置**: 6行 × 8列
- **サイズ**: 幅50px × 高さ20px
- **間隔**: 8px
- **初期HP**: 1（一部のブロックは2以上）
- **スコア**: 100点/個

## パワーアップシステム

### パワーアップ種類

#### 1. パドル拡大（expand）
- **効果**: パドルの幅を40px拡大
- **色**: シアン（#0ff）
- **持続時間**: 12秒

#### 2. マルチボール（multi）
- **効果**: ボールを3個に増加
- **色**: イエロー（#ff0）
- **持続時間**: なし（永続）

#### 3. 貫通弾（pierce）
- **効果**: ボールがブロックを貫通
- **色**: マゼンタ（#f0f）
- **持続時間**: 10回の貫通

#### 4. スロー（slow）
- **効果**: ボールの速度を0.7倍に減少
- **色**: グリーン（#0f0）
- **持続時間**: 8秒

#### 5. スコア2倍（score2x）
- **効果**: ブロック破壊時のスコアを2倍
- **色**: レッド（#f00）
- **持続時間**: 12秒

#### 6. シールド（shield）
- **効果**: 1回のボール落下を防ぐ
- **色**: ブルー（#00f）
- **持続時間**: 5秒

#### 7. レーザー（laser）
- **効果**: パドルからレーザーを発射
- **色**: オレンジ（#f80）
- **持続時間**: 2秒

#### 8. 爆弾（bomb）
- **効果**: 画面内の全ブロックを一掃
- **色**: ダークレッド（#800）
- **持続時間**: なし（即座発動）

#### 9. ライフ増加（life）
- **効果**: ライフを1増加（最大5まで）
- **色**: ライトグリーン（#0f8）
- **持続時間**: なし（永続）

#### 10. スピードアップ（speedup）
- **効果**: ボールの速度を1.5倍に増加
- **色**: マゼンタ（#f0f）
- **持続時間**: 8秒

### パワーアップドロップ
- **ドロップ確率**: 20%（ブロック破壊時）
- **落下速度**: 3px/frame
- **取得方法**: パドルで接触

## エフェクトシステム

### パーティクルエフェクト
- **ブロック破壊時**: 8個のパーティクル
- **色**: ブロックタイプに応じて変化
- **サイズ**: 3-6px（ランダム）
- **速度**: 2-5px/frame（ランダム）

### 視覚エフェクト
- **背景スクロール**: 連続的な背景移動
- **ボール軌跡**: ボールの移動軌跡を表示
- **エフェクトメッセージ**: パワーアップ効果の表示

## サウンドシステム

### 効果音
- **hit.wav**: ボール反射時
- **break.wav**: ブロック破壊時
- **powerup.wav**: パワーアップ取得時
- **gameover.wav**: ゲームオーバー時
- **clear.wav**: ステージクリア時

### 音量設定
- **全効果音**: 40%音量

## 操作説明

### キーボード操作
- **左右矢印キー**: パドル移動
- **スペースキー**: ゲーム開始/ステージ進行

### マウス操作
- **マウス移動**: パドル移動（相対位置）

## スコアシステム

### 基本スコア
- **ブロック破壊**: 100点
- **爆弾使用**: 100点/ブロック

### ボーナス
- **スコア2倍**: パワーアップ中は全スコアが2倍

## ステージシステム

### ステージ進行
- **ステージ1**: 基本ブロック配置
- **ステージ2以降**: 難易度上昇
- **ブロック数**: 48個（6×8）

### ステージクリア条件
- 全てのブロックを破壊
- ボールが残っている

## 技術仕様

### 開発環境
- **言語**: JavaScript（ES6+）
- **グラフィックス**: HTML5 Canvas
- **サウンド**: Web Audio API
- **アニメーション**: requestAnimationFrame

### パフォーマンス
- **目標FPS**: 60FPS
- **描画処理**: 毎フレーム更新
- **物理演算**: 簡易的な衝突判定

### ブラウザ対応
- **対応ブラウザ**: モダンブラウザ（Chrome, Firefox, Safari, Edge）
- **必要機能**: Canvas API, Audio API

## ファイル構成

```
block broken/
├── index.html          # メインHTMLファイル
├── game.js             # メインゲームロジック
├── style.css           # 基本スタイル
├── pomodoro.html       # ポモドーロタイマー版
├── pomodoro.js         # ポモドーロ機能
├── pomodoro.css        # ポモドーロスタイル
├── se/                 # サウンドエフェクト
│   ├── hit.wav
│   ├── break.wav
│   ├── powerup.wav
│   ├── gameover.wav
│   └── clear.wav
└── README.md           # 基本説明書
```

## 今後の拡張予定

### 機能追加
- [ ] レベルデザイナーツール
- [ ] ハイスコア保存機能
- [ ] 複数ステージの追加
- [ ] ボス戦の実装
- [ ] オンライン対戦機能

### 改善点
- [ ] モバイル対応（タッチ操作）
- [ ] アクセシビリティ向上
- [ ] パフォーマンス最適化
- [ ] サウンド設定のカスタマイズ

## バグ修正履歴

### v1.0.1
- ボール落下時のゲームオーバー処理を修正
- 落下判定の精度向上
- デバッグログの追加

### v1.0.0
- 初期リリース
- 基本ゲーム機能の実装
- パワーアップシステムの実装

## 開発者情報

- **開発者**: shin1624
- **リポジトリ**: https://github.com/shin1624/Breakout
- **ライセンス**: 未定
- **最終更新**: 2024年12月

---

*この仕様書は、Block Brokenゲームの開発と保守のために作成されました。*
